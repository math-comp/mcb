% vim:set errorformat="":
%\usepackage[pass]{geometry}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{colortbl}
\usepackage{marginnote}
\usepackage{wrapfig}
\usepackage{array}
\usepackage{tabularx}
\usepackage{environ}
\usepackage{bussproofs}
\usepackage{exercise}
\usepackage{imakeidx}
\usepackage[normalem]{ulem}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{needspace}
\usepackage{lscape}
% %\usepackage{fontspec} % xelatex only
\usepackage{hyperref} % must be the last one
\hypersetup{
    colorlinks=true,
    linkcolor=ocre,
    citecolor=ocre,
    urlcolor=ocre
}

\usepackage[skins,listings]{tcolorbox}

\definecolor{dkblue}{rgb}{0,0.1,0.5}
\definecolor{lightblue}{rgb}{0,0.5,0.5}
\definecolor{dkgreen}{rgb}{0,0.4,0}
\definecolor{dk2green}{rgb}{0.4,0,0}
\definecolor{dkviolet}{rgb}{0.6,0,0.8}
\definecolor{mantra}{rgb}{0.2,0.6,0.2}
\definecolor{gotcha}{rgb}{0.8,0.2,0}
\definecolor{ocre}{RGB}{243,102,25} %borrowed to Orange Book

\def\lstlanguagefiles{defManSSR.tex}
\lstset{language=SSR}

\newcommand{\mcbimpl}[1]{\lstinline/?$_{#1}$/}
\newcommand{\mcbimplm}[1]{\mbox{?}_{#1}}

\newcommand{\lib}[1]{\textsf{#1}}

\newcommand{\C}[1]{\mbox{\lstinline`#1`}}
\newcommand{\D}[1]{\mbox{\lstinline'#1'}}
% %\let\L=\lstinline

% Highlights identifiers, |* id *| in underlined red, can we do better?
%\lstset{moredelim=[is][\color{red}\bfseries\ttfamily\underbar]{|*}{*|}}
\lstset{moredelim=[is][\ttfamily\uwave]{|==}{==|}}
\lstset{moredelim=[is][\ttfamily\underbar]{|--}{--|}}

\newcommand{\gotcha}[1]{
\begin{remark}
#1
\end{remark}
}

\newcommand{\mantra}[1]{
\begin{remark}
#1
\end{remark}
}

% \newbox{\devnull}
 \NewEnviron{coqdef}[1]{}

 \newcommand{\coqrun}[2]{}

\lstnewenvironment{coq}[2]{\mdframed[skipabove=10pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=ocre,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]\lstset{numbers=left,numberstyle=\tiny,xleftmargin=5mm}}{\endmdframed}


\lstnewenvironment{coqout}[2]{\mdframed[skipabove=10pt,
skipbelow=7pt,
rightline=false,
leftline=true,
topline=false,
bottomline=false,
linecolor=gray,
backgroundcolor=black!5,
innerleftmargin=5pt,
innerrightmargin=5pt,
innertopmargin=0pt,
leftmargin=0cm,
rightmargin=0cm,
linewidth=4pt,
innerbottommargin=0pt]}{\endmdframed}


% For current cheatsheets, to be fixed
\newcommand{\ssrc}[2]{\needspace{2\baselineskip}\C{#1}\vspace{0.4em}\\\hspace*{1.5em}\begin{minipage}{0.28\textwidth}#2 \hspace*{\fill}\end{minipage}\vspace{0.4em}}
\newcommand{\caveat}[1]{\fbox{caveat}: #1}
